<%- include('../partials/header') %>
<div class="container">
  <div class="card">
    <div class="tab-content" id="myTabContent">
      <div
        class="tab-pane fade show active"
        id="profileinfo"
        role="tabpanel"
        aria-labelledby="profileinfo-tab"
      >
        <div class="card-body">
          <h5 class="prof-card-title">
            Hello, <%= user.name %>
            <img
              src="/images/icecream.png"
              alt="ice cream pic"
              class="profile-logo"
            />
          </h5>
          <p class="font-weight-bold">USERNAME: &ensp; <%= user.userName %></p>
          <p class="font-weight-bold">SKIN-TYPE: &ensp; <%= user.skinType %></p>
          <p class="font-weight-bold">GOALS: &ensp; <%= user.goal %></p>
          <div class="overflow-auto" style="height: 180px; overflow-y: scroll">
            <p class="font-weight-bold">BIO: &ensp; <%= user.bio %></p>
          </div>
        </div>
      </div>
      <!-- Card for Update info -->
      <div
        class="tab-pane fade"
        id="updateinfo"
        role="tabpanel"
        aria-labelledby="updateinfo-tab"
      >
        <div class="card-body">
          <!-- Updata info route -->
          <form action="/users/<%= user._id %>?_method=PUT" method="POST">
            <div class="form-row">
              <div class="col-md-12">
                <label>Username:</label>
                <input
                  type="text"
                  id="userName"
                  class="form-control"
                  name="userName"
                  value="<%= user.userName %>"
                />
              </div>
            </div>
            <br />
            <div class="form-row">
              <div class="col-md-12">
                <label>Skin Type:</label>
                <input
                  type="text"
                  id="userSkinType"
                  class="form-control"
                  name="skinType"
                  value="<%= user.skinType %>"
                />
              </div>
            </div>
            <br />
            <div class="form-row">
              <div class="col-md-12">
                <label for="userGoal">Goals:</label>
                <input
                  type="text"
                  id="userGoal"
                  class="form-control"
                  name="goal"
                  value="<%= user.goal %>"
                />
              </div>
            </div>
            <br />
            <div class="form-row">
              <div class="col-md-12">
                <label>Bio:</label>
                <textarea rows="3" id="bio" class="form-control" name="bio">
<%= user.bio %></textarea
                >
              </div>
            </div>
            <button type="submit" class="btn btn-warning">Update</button>
          </form>
        </div>
      </div>
      <!--Collection Card-->
      <div
        class="tab-pane fade show"
        id="favorites"
        role="tabpanel"
        aria-labelledby="favorites-tab"
      >
        <div class="card-body">
          <h1 class="my-collection">My Collection</h1>
          <div class="overflow-auto" style="height: 300px; overflow-y: scroll">
            <% user.favorites.forEach(p => { %>
            <form
              action="/products/<%= p._id %>/favs?_method=DELETE"
              method="POST"
            >
              <a href="/products/<%= p._id %>"
                ><p><%= p.name %> <button class="deleteBtn">x</button></p></a
              >
            </form>
            <% }) %>
          </div>
        </div>
      </div>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <!--Info Tab-->
        <li class="nav-item-prof">
          <a
            class="nav-link active"
            id="profileinfo-tab"
            data-toggle="tab"
            href="#profileinfo"
            role="tab"
            aria-controls="profileinfo"
            aria-selected="true"
            style="color: rgb(76, 119, 118)"
            >My Info</a
          >
        </li>
        <!-- Update tab -->
        <li class="nav-item">
          <a
            class="nav-link"
            id="updateinfo-tab"
            data-toggle="tab"
            href="#updateinfo"
            role="tab"
            aria-controls="updateinfo"
            aria-selected="false"
            style="color: rgb(76, 119, 118)"
            >Update Info</a
          >
        </li>
        <!-- Favorites tab -->
        <li class="nav-item">
          <a
            class="nav-link"
            id="favorites-tab"
            data-toggle="tab"
            href="#favorites"
            role="tab"
            aria-controls="products"
            aria-selected="false"
            style="color: rgb(76, 119, 118)"
            >Collection</a
          >
        </li>
      </ul>
    </div>
  </div>

  <%- include('../partials/footer') %>
</div>
